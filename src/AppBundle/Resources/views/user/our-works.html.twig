{% extends "@App/layout-user.html.twig" %}

{% block title %}Наши работы{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bundles/css/our-works.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('bundles/css/h2.css') }}" type="text/css" />
    <style>
        .black-background {
            background-color:#000;
            z-index: 105;
            opacity: 0.9;
            width: 100%;
            height: 100%;
            position: fixed;
            top:0px;
        }

        .close-black-background {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 35px;
            opacity: 1;
        }

        .close-black-background:hover,
        .close-black-background:focus,
        .div-black-background-image > i:hover,
        .div-black-background-image > i:focus{
            color: rgba(255,255,255,1);
            text-decoration: none;
            cursor: pointer;
            filter: alpha(opacity=50);
            opacity: .5;
        }

        .black-background-image {
            max-height: 500px;
            max-width: 900px;
            position: fixed;
            z-index: 106;
            text-align: center;
        }

        .div-black-background-image > i{
            position: fixed;
            top:48%;
            font-size: 35px;
            z-index: 107;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="container our-works" id="our-works">
        <h2>Наши работы</h2>
        <div class="row">
            <div class="box effect2 col-xs-6 col-md-4" data-number = "1" style="background-image: url({{ asset('bundles/image/your-work1.png') }})"></div>
            <div class="box effect2 col-xs-6 col-md-4" data-number = "2" style="background-image: url({{ asset('bundles/image/your-work2.jpg') }})"></div>
            <div class="box effect2 col-xs-6 col-md-4" data-number = "3" style="background-image: url({{ asset('bundles/image/your-work3.jpg') }})"></div>
        </div>
        <div class="row">
            <div class="box effect2 col-xs-6 col-md-4" data-number = "4"  style="background-image: url({{ asset('bundles/image/your-work4.jpg') }})"></div>
            <div class="box effect2 col-xs-6 col-md-4" data-number = "5"  style="background-image: url({{ asset('bundles/image/your-work5.jpg') }})"></div>
            <div class="box effect2 col-xs-6 col-md-4" data-number = "6"  style="background-image: url({{ asset('bundles/image/your-work6.jpg') }})"></div>
        </div>
        <div class="row">
            <div class="box effect2 col-xs-6 col-md-4" data-number = "7"  style="background-image: url({{ asset('bundles/image/your-work7.jpg') }})"></div>
            <div class="box effect2 col-xs-6 col-md-4" data-number = "8"  style="background-image: url({{ asset('bundles/image/your-work8.jpg') }})"></div>
            <div class="box effect2 col-xs-6 col-md-4" data-number = "9"  style="background-image: url({{ asset('bundles/image/your-work9.jpg') }})"></div>
        </div>
    </div>
    <div class="black-background" hidden>
        <i class="glyphicon glyphicon-remove close-black-background"></i>
    </div>
    <div class="div-black-background-image" hidden>
        <i class="glyphicon glyphicon-chevron-left"></i>
        <img class="black-background-image">
        <i class="glyphicon glyphicon-chevron-right"></i>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        var box = $('.box');
        var numberImage = 1;
        var left = $('.glyphicon-chevron-left');
        var right = $('.glyphicon-chevron-right');
        var path;

        box.on('click', function (event) {
            numberImage = event.target.getAttribute('data-number') - 1;

            $('.black-background').attr('hidden', false);

            path = event.target.style.backgroundImage.split('"')[1];
            createSlider(path);
        });

        $('.black-background').on('click', function () {
            $('.black-background').attr('hidden', 'hidden');
            $('.div-black-background-image').attr('hidden', 'hidden');
        });

        left.on('click', function () {
            numberImage = parseInt(numberImage) - 1;
            if(numberImage <  0)
            {
                numberImage = box.length - 1;
            }
            path = box[numberImage].style.backgroundImage.split('"')[1];
            createSlider(path);
        });

        right.on('click', function () {
            numberImage = parseInt(numberImage) + 1;
            if(numberImage >  box.length - 1)
            {
                numberImage = 0;
            }
            path = box[numberImage].style.backgroundImage.split('"')[1];
            createSlider(path);
        });

        var createSlider = function (path) {
            var image = $('.black-background-image');
            image.attr('src', path);
            $('.div-black-background-image').attr('hidden', false);
            image.css('left', 'calc((100% - ' + image.css('width') + ')/2)');
            image.css('top', 'calc((100% - ' + image.css('height') + ')/2)');

            left.css('left', image.css('left'));
            right.css('right', image.css('right'));
        }
    </script>
{% endblock %}

